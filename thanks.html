<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Theatrum — Order Complete</title>
  <link rel="stylesheet" href="styles/index_styles.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-primary: #020617;
      --bg-card: #020617;
      --bg-secondary: #030712;
      --accent-red: #f97373;
      --accent-green: #22c55e;
      --accent-amber: #facc15;
      --text-primary: #ffffff;
      --text-secondary: #a1a1aa;
      --border: #27272a;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
    }

    .checkout-shell { max-width: 1200px; margin: 120px auto 64px; padding: 0 32px; }
    .checkout-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 24px; }
    @media (max-width: 900px) { .checkout-grid { grid-template-columns: 1fr; } }

    .card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 24px; }
    .card h2 { font-size: 28px; margin-bottom: 8px; color: var(--text-primary); }
    .muted { color: var(--text-secondary); font-size: 14px; }
    .divider { height:1px; background: var(--border); margin: 16px 0 20px; }

    .pill {
      display:inline-block;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(34,197,94,.35);
      background: rgba(34,197,94,.12);
      font-size:12px;
      color:#4ade80;
      text-transform:uppercase;
      letter-spacing:.08em;
    }

    .row { display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap; }
    .success-icon {
      width:84px; height:84px; border-radius:50%;
      display:grid; place-items:center;
      background: rgba(34,197,94,.15);
      border:1px solid rgba(34,197,94,.35);
    }
    .success-icon svg { width:42px; height:42px; color:#22c55e; }
    .headline { font-size: 32px; font-weight: 800; margin: 4px 0 8px; color: var(--text-primary); }

    .ticket {
      display:grid;
      grid-template-columns: 1fr auto;
      gap:16px;
      margin-top: 16px;
      padding:16px;
      border-radius: 14px;
      border:1px dashed rgba(148,163,184,.4);
      background: radial-gradient(circle at top left, rgba(248,113,113,.22), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(56,189,248,.22), transparent 55%),
                  var(--bg-secondary);
    }
    .qr {
      width:120px; height:120px; border-radius:8px;
      border:1px solid var(--border);
      background: var(--bg-secondary);
      display:grid; place-items:center;
    }
    .qr img { display:block; width:100%; height:100%; object-fit:contain; }

    .meta { display:grid; gap:6px; color: var(--text-primary); }
    .meta b { font-weight: 700; }

    .actions { display:flex; gap:12px; margin-top: 16px; flex-wrap:wrap; }

    .btn-primary {
      background: var(--accent-red);
      color: white;
      border: none;
      border-radius: 10px;
      padding: 12px 24px;
      cursor: pointer;
      font-weight: 700;
      font-size: 14px;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .btn-primary:hover { background: #fb6363; transform: translateY(-1px); }

    .btn-secondary {
      background: transparent;
      color: var(--text-secondary);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 12px 24px;
      cursor: pointer;
      font-weight: 700;
      font-size: 14px;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .btn-secondary:hover { background: var(--bg-card); border-color: var(--text-secondary); }

    /* Right column summary */
    .summary-row {
      display:flex;
      justify-content: space-between;
      margin: 10px 0;
      color: var(--text-secondary);
      font-size: 14px;
    }
    .summary-row.total {
      color: var(--text-primary);
      font-weight: 700;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <div class="logo"><span class="logo-thea">THEA</span><span class="logo-trum">TRUM</span></div>
      <ul class="nav-links">
        <li><a href="#now-playing">Now Playing</a></li>
        <li><a href="#coming-soon">Coming Soon</a></li>
        <li><a href="#concessions">Food & Drinks</a></li>
        <li><a href="#offers">Offers</a></li>
        <li><a href="#locations">Locations</a></li>
      </ul>
      <div class="nav-actions">
        <div class="search-box">
          <input id="globalSearch" type="text" placeholder="Search movies..." />
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </div>
        <button id="userButton" class="btn-primary">Alex</button>
      </div>
    </div>
  </nav>

  <main class="checkout-shell">
    <div class="checkout-grid">
      <!-- Left: success + ticket -->
      <section class="card">
        <span class="pill">Booking confirmed</span>
        <div class="row" style="margin-top: 12px;">
          <div class="success-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 13l4 4L19 7"></path>
              <circle cx="12" cy="12" r="9"></circle>
            </svg>
          </div>
          <div>
            <div class="headline" id="thankyou-name">Thank you!</div>
            <div class="muted" id="thankyou-message">Your payment has been processed and your tickets are ready.</div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="ticket">
          <div class="meta">
            <div><b id="movie-title">Your movie at Theatrum</b></div>
            <div class="muted" id="showtime-label">Showtime: Today</div>
            <div>Seats: <b id="ticket-seats">-</b></div>
            <div>Tickets: <span id="ticket-count-line">0 × Standard</span></div>
            <div>Order #: <b id="order-id">TH-000000</b></div>
            <div>Receipt sent to <b id="order-email">guest@example.com</b></div>
          </div>
          <div class="qr" id="qr-container" aria-label="QR code for your ticket">
            <img id="qr-image" alt="QR Code for your order" />
          </div>
        </div>

        <div class="actions">
          <button class="btn-primary" onclick="window.location.href='new-account-dashboard.html#bookings'">
            View tickets
          </button>
          <button class="btn-secondary" onclick="window.location.href='index.html'">
            Back to home
          </button>
        </div>

        <div class="divider"></div>
        <div class="muted">Show the QR at the entrance. Please arrive 10 minutes early.</div>
      </section>

      <!-- Right: cost summary -->
      <aside class="card">
        <h2>Order details</h2>
        <p class="muted" id="billing-name-line">Billing name: <b>Guest</b></p>
        <p class="muted" id="order-date-line">Order date: —</p>
        <p class="muted" id="order-confirm-line">Confirmation: <b>TH-000000</b></p>

        <div class="divider"></div>

        <div class="summary-row">
          <span>Tickets</span>
          <span id="summary-tickets">$0.00</span>
        </div>
        <div class="summary-row">
          <span>Snacks & extras</span>
          <span id="summary-snacks">$0.00</span>
        </div>
        <div class="summary-row">
          <span>Fees & tax</span>
          <span id="summary-fees">$0.00</span>
        </div>
        <div class="summary-row total">
          <span>Total paid</span>
          <span id="summary-total">$0.00</span>
        </div>

        <div class="divider"></div>
        <button class="btn-secondary" style="width:100%;" onclick="alert('In a real app this would re-send your email receipt.')">
          Email again
        </button>
      </aside>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <div class="footer-logo">
            <span class="logo-thea">THEA</span><span class="logo-trum">TRUM</span>
          </div>
          <p>Experience cinema the way it was meant to be seen.</p>
        </div>
        <div class="footer-section">
          <h4>Customer Support</h4>
          <ul>
            <li><a href="#">Help Center</a></li>
            <li><a href="#">Contact Us</a></li>
            <li><a href="#">Accessibility</a></li>
            <li><a href="#">Careers</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Newsletter</h4>
          <p>Get the latest movies and exclusive offers</p>
          <div class="newsletter-form">
            <input type="email" placeholder="Your email" />
            <button class="btn-primary">Subscribe</button>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 THEATRUM. All rights reserved.</p>
        <div class="footer-links">
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
          <a href="#">Cookie Settings</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var dataRaw = localStorage.getItem('orderConfirmation') || '{}';
      var data;
      try {
        data = JSON.parse(dataRaw);
      } catch (e) {
        data = {};
      }

      var name = data.customerName || 'Guest';
      var email = data.email || 'guest@example.com';
      var orderId = data.orderId || 'TH-000000';
      var ticketQty = data.ticketQty || 0;
      var ticketType = data.ticketType || 'Standard';
      var seats = Array.isArray(data.seats) ? data.seats : [];
      var subtotal = Number(data.subtotal || 0);
      var fees = Number(data.fees || 0);
      var total = Number(data.total || 0);
      var snacksTotal = Number(data.snacksTotal || 0) + Number(data.upsellTotal || 0);

      // Headline + message
      var thankNameEl = document.getElementById('thankyou-name');
      var thankMsgEl = document.getElementById('thankyou-message');
      if (thankNameEl) thankNameEl.textContent = 'Thank you, ' + name + '!';
      if (thankMsgEl) thankMsgEl.textContent = 'Your booking is confirmed and your tickets are ready.';

      // Ticket section
      var seatsEl = document.getElementById('ticket-seats');
      var ticketCountLineEl = document.getElementById('ticket-count-line');
      var orderIdEl = document.getElementById('order-id');
      var orderEmailEl = document.getElementById('order-email');

      if (seatsEl) seatsEl.textContent = seats.length ? seats.join(', ') : '-';
      if (ticketCountLineEl) {
        ticketCountLineEl.textContent =
          ticketQty + ' × ' + ticketType + ' ticket' + (ticketQty === 1 ? '' : 's');
      }
      if (orderIdEl) orderIdEl.textContent = orderId;
      if (orderEmailEl) orderEmailEl.textContent = email;

      // Simple QR using external service, based on orderId
      var qrImg = document.getElementById('qr-image');
      if (qrImg) {
        var qrData = encodeURIComponent('https://theatrum.example/booking/' + orderId);
        qrImg.src = 'https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=' + qrData;
      }

      // Right card
      var billingNameLine = document.getElementById('billing-name-line');
      var orderDateLine = document.getElementById('order-date-line');
      var orderConfirmLine = document.getElementById('order-confirm-line');

      if (billingNameLine) {
        billingNameLine.innerHTML = 'Billing name: <b>' + name + '</b>';
      }

      var date = data.createdAt ? new Date(data.createdAt) : new Date();
      var dateOptions = { year: 'numeric', month: 'short', day: 'numeric' };
      var dateStr = date.toLocaleDateString(undefined, dateOptions);
      if (orderDateLine) {
        orderDateLine.textContent = 'Order date: ' + dateStr;
      }
      if (orderConfirmLine) {
        orderConfirmLine.innerHTML = 'Confirmation: <b>' + orderId + '</b>';
      }

      // Money summary
      function fmt(v) {
        return '$' + (Number(v) || 0).toFixed(2);
      }
      var summaryTickets = document.getElementById('summary-tickets');
      var summarySnacks = document.getElementById('summary-snacks');
      var summaryFees = document.getElementById('summary-fees');
      var summaryTotal = document.getElementById('summary-total');

      if (summaryTickets) summaryTickets.textContent = fmt(subtotal - snacksTotal - fees + fees); // approximate tickets only
      if (summarySnacks) summarySnacks.textContent = fmt(snacksTotal);
      if (summaryFees) summaryFees.textContent = fmt(fees);
      if (summaryTotal) summaryTotal.textContent = fmt(total);
    });
  </script>
</body>
</html>
